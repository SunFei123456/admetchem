# Git Commit Message 规范

为保证提交记录清晰、一致、便于自动化工具解析，请在本仓库中遵循以下提交信息规范。该规范参考了多家一线互联网公司及优秀开源项目（如 Angular、Vue、React 等）的实践，并结合团队协作经验进行适配。

## 1. 基本结构

```
<type>(<scope>): <subject>

[可选] <body>

[可选] <footer>
```

- `type`：必填，提交类别标识。
- `scope`：可选，作用范围（模块/目录/组件）。如无需限定可省略括号。
- `subject`：必填，简要描述本次改动，控制在 50 字符以内。
- `body`：可选，详细说明改动动机、实现思路或潜在影响，保持单行不超过 72 字符，可分段。
- `footer`：可选，用于关联任务/缺陷编号、破坏性变更说明、回滚信息等。

> 推荐使用中文提交信息；若需英文，请保证语义清晰、语法正确。

## 2. `type` 取值

| type | 说明 | 典型场景示例 |
| --- | --- | --- |
| feat | 新功能 | 新增模块、接口或交互能力 |
| fix | 缺陷修复 | 修复线上/测试环境 Bug |
| docs | 文档变更 | README、规范文档、注释更新 |
| style | 样式或格式调整 | CSS 修改、代码格式化（不影响逻辑） |
| refactor | 重构 | 代码结构优化、重命名（非功能新增/修复） |
| perf | 性能优化 | 优化加载速度、内存占用等 |
| test | 测试相关 | 新增/更新单测、集成测试脚本 |
| build | 构建系统 | 构建脚本、依赖管理、打包配置 |
| ci | CI/CD 变更 | 持续集成流水线配置 |
| chore | 杂项 | 依赖升级、脚手架调整、非业务性杂项 |
| revert | 回滚提交 | 回滚某次提交，需在 `footer` 标明回滚的 commit 哈希 |

> 如需引入新的 `type`，请在团队内评估后在本规范中补充说明。

## 3. `scope` 推荐写法

- 按目录或模块划分，如：`api`、`router`、`views/home`、`docs`。
- 可使用跨模块标签：`global`（全局）、`deps`（依赖）、`release`（发版）。
- 当影响范围不明确或跨多个模块，可省略 `scope`。

## 4. `subject` 编写建议

- 使用祈使句，描述“做了什么”，例如 `修复 token 过期后登陆失败的问题`。
- 避免出现句号、逗号等收尾标点；除专有名词外尽量不使用英文缩写。
- 若包含 Issue/任务编号，请移至 `footer`。

## 5. `body` 与 `footer`

- `body` 用于补充背景、改动细节、风险提示，建议条理清晰、分点描述。
- `footer` 常见格式：
  - `BREAKING CHANGE: <说明>`：存在不兼容变更时必须填写。
  - `Refs: #123` / `Closes: #123`：关联或关闭的工单、Issue。
  - `Co-authored-by: 姓名 <邮箱>`：多人协作提交。

## 6. 常见示例

```
feat(router): 支持按角色动态生成菜单

- 新增 admin/guest 两种权限映射
- 匹配不到权限时回退至 404

Refs: #1024
```

```
fix: 修复 token 续签失败导致的强制登出

原因：后端接口返回空字符串时未做兼容
处理：统一在拦截器内补救并补充异常日志

Closes: #1107
```

```
docs: 补充 git 提交规范与分支命名策略
```

## 7. 校验与自动化建议

- 建议在本地配置 [Commitlint](https://commitlint.js.org/) 等工具，对提交信息进行自动校验。
- 可结合 `husky`、`lint-staged` 实现提交前的格式与规范检查。
- 持续集成环境可增加检查步骤，阻止不合规提交流入主干。

## 8. 特殊场景说明

- **临时提交**：如需临时保存（WIP），请使用临时分支或 `git stash`，避免直接推送不规范信息。
- **合并记录**：使用 `rebase` 保持提交线性；若必须保留 Merge Commit，请确保描述清晰，例如 `merge: 合并 release 分支入 main`。
- **回滚操作**：使用 `revert` 类型提交，并在 `footer` 说明被回滚的提交哈希及原因。

> 规范的提交信息是项目历史、代码回溯和自动化发布的基础，请在日常协作中自觉遵守。如有补充建议，可在 PR/Issue 中发起讨论。

